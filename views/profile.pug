extends layout

block scripts

block content
  div(id="successAlert" class="alert alert-success" role="alert" style="position: fixed; z-index: 2; right: 20px; display: none; top: -100px") Collection modified successfully
  div(id="failAlert" class="alert alert-danger" role="alert" style="position: fixed; z-index: 2; right: 20px; display: none; top: -100px") Something went wrong, please reload the page

  div(class="container")
    h1= title

    - var page_user = title==="My Profile"?user.name:title.slice(0, -10)
    - var badges = user.supportStatus

    if badges.length !== 0
      include badgeDescriptions.pug
      if badges.includes("adfree")
        - var level = badges.find((el) => el.startsWith("Lv"));
        style.
          #supportBadge>div {
            width: 100%;
            color: white;
            font-size: small;
            text-align: center;
            transform: translateY(-115%);
          }
      each badge in badges
        if badge === "adfree"
          div(id="supporterBadgeModel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="supporterBadgeModelTitle" aria-hidden="true")
            div(class="modal-dialog" role="document")
              div(class="modal-content")
                div(class="modal-header")
                  h5(class="modal-title text-primary" id="supporterBadgeModelTitle")= level + " Supporter"
                  button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                    span(aria-hidden="true") &times;
                div(class="modal-body") Proud supporter of Karasu-OS! Unlock by making a donation to keep Karasu alive.
                div(class="modal-footer")
                  button(type="button" class="btn btn-secondary" data-dismiss="modal") Close
                  a(type="button" class="btn btn-primary" href="https://www.buymeacoffee.com/karasuos" target="_blank") Unlock the Badge
        else if (badge.startsWith("Lv") || badge === '')
          //- do nothing
        else
          div(id=badge+"Modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby=badge+"Title" aria-hidden="true")
            div(class="modal-dialog" role="document")
              div(class="modal-content")
                div(class="modal-header")
                  h5(class="modal-title text-primary" id=badge+"Title")= list[badge].title
                  button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                    span(aria-hidden="true") &times;
                div(class="modal-body") !{list[badge].description}
                div(class="modal-footer")
                  button(type="button" class="btn btn-secondary" data-dismiss="modal") Close

    div.card.card-body.shadow.mb-3.py-4
      div.row
        div.col.col-md-4.text-center
          img(src="/images/cards/L/The_Mammon_Way.jpg" style="width:256px;height:auto;")
        div.col
          h5.mt-4 #{page_user}
            span.text-muted.ml-4(style="font-size:12px;letter-spacing:.4px;") <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-clock mr-1" viewBox="0 0 16 16"><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>   <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/> </svg>
              | Joined #{profileInfo.joinKarasu}
          if badges.length !== 0
            div(style="display:flex;")
              each badge in badges
                if badge === "adfree"
                  div#supportBadge.mr-2(type="button" data-toggle="modal" data-target="#supporterBadgeModel" style="width:auto;height:32px;")
                    img(src="/images/SupporterBadge.png" alt="supporter badge" style="width:auto;height:32px;")
                    div= level.substring(2)
                else if (badge.startsWith("Lv") || badge === '')
                  //- do nothing
                else
                  div.mr-2.my-auto(type="button" data-toggle="modal" data-target=`#${badge}Modal`)
                    img(src="/images/"+badge+".png" alt=badge style="width:auto;height:28px;")
          hr(style="border-color:gold;")
          div.row
            div.col.col-md-6 In-game Name:
                |
                | #{profileInfo.name?profileInfo.name:"???"}
            div.col.col-md-6 Friend ID:
                |
                | #{profileInfo.id?profileInfo.id:"???"}
            div.col.col-md-6 Started playing since
                |
                | #{profileInfo.joinOM?profileInfo.joined:"???"}
            div.col-12.col-md-6
              span Language
              |
              | #{profileInfo.language?profileInfo.language:"???"}
            div.col-12.col-md-6 Favourite characters:
                |
                br
                |
                img(src="/images/faces/Lucifer.png" style="width:32px;height:32px;")
                img(src="/images/faces/Lucifer.png" style="width:32px;height:32px;")
                img(src="/images/faces/Lucifer.png" style="width:32px;height:32px;")
                img(src="/images/faces/Lucifer.png" style="width:32px;height:32px;")
                img(src="/images/faces/Lucifer.png" style="width:32px;height:32px;")
    div#display.row
      div.col-12.col-md
        div.card
          h5.card-header [[contact image]] Cards
          ul.card-body
            for i in cards.owned
              li
                a(href=`../card/${encodeURIComponent(i.name.replace(/ /g, '_'))}`)
                  img(src="/images/cards/S/" + i.uniqueName + ".jpg")
          a.text-right(href='collection') See more ->
      div.col-12.col-md
        div.card
          h5.card-header <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#FFC300" class="bi bi-star-fill" viewBox="0 0 16 16"><path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/></svg> Favourites
          ul.card-body
            for i in cards.faved
              li
                a(href=`../card/${encodeURIComponent(i.name.replace(/ /g, '_'))}`)
                  img(src="/images/cards/S/" + i.uniqueName + ".jpg")
          a.text-right(href='favourite') See more ->
    style.
      p>span {
        font-weight: 600;
      }
      #display ul {
        list-style: none;
      }
      #display li {
        float: left;
      }
      #display ul img {
        width: 80px;
        height: 80px;
        margin: .25rem;
      }
