extends layout

block scripts
	link(rel="stylesheet" href="/stylesheets/event.css")
	script(src="/javascripts/eventPageFunctions.js")
	script.
		var event = !{JSON.stringify(event)};

block content
	.container
		h1= t("lang")==="en"?event.name:event.ja_name
		
		// Cards
		if event.rewards.filter(r => r.card).length > 0
			.card.shadow.px-4.py-3.mb-4
				h5= t("events.cards")
				.row
					each reward in event.rewards
						if reward.card
							.d-none.d-md-block.col(style=`min-width: 16.5%; max-width: ${100/event.rewards.length}%`)
								a.text-center.m-0.text-black-50(href="../card/"+encodeURIComponent(reward.card.name.replace(/ /g, '_')))
									img.img-fluid.d-none.d-md-flex(src="/images/cards/L/" + reward.card.uniqueName + ".jpg")
									figcaption.my-1= t("lang")==="en"?reward.card.name:reward.card.ja_name
							.d-block.d-md-none.col-4
								a.text-center.m-0.text-black-50(href="../card/"+encodeURIComponent(reward.card.name.replace(/ /g, '_')))
									img.img-fluid.d-flex.d-md-none.w-100(src="/images/cards/S/" + reward.card.uniqueName + ".jpg" style="max-width: 110px")
									figcaption.my-1= t("lang")==="en"?reward.card.name:reward.card.ja_name

		// Calculator
		if event.type === "Lonely Devil" || (event.type === "Pop Quiz" && (event.start <= new Date() && event.end >= new Date()))
			.card.shadow.p-4.mb-4
				h5= t("events.calculator")
				.form-row.mb-4.mt-2
					.col-6.col-md-3.mr-1.mr-md-5.mb-3.mb-md-0
						// TODO move .underline-input to common stylesheet
						input.form-control.underline-input#currentPoints(type="number" aria-label="Current Points" required)
						span.floating-label= t("events.currentPoints")
					.col-6.col-md-3.ml-0.ml-md-5
						input.form-control.underline-input#pointsPerBattle(type="number" aria-label="Points per battle" required)
						span.floating-label= t("events.pointsPerBattle")
				.row.text-center.lead.border-bottom.border-secondary.mx-1.mb-2.pb-2
					.col= t("events.rewardTitle")
					.col= t("events.pointsTitle")
					.col= t("events.calculationsTitle")
				each reward in event.rewards.filter(r => r.tag)
					.row.mb-3.align-middle
						.col
							if reward.card
								a(href="../card/"+encodeURIComponent(reward.card.name.replace(/ /g, '_')))= t("lang")==="en"?reward.card.name:reward.card.ja_name
							.small= reward.tag
						.col.text-center
							| #{reward.points}
						.col
							div(id="collected_"+reward.tag.replace(" ", ""))
							div(id="stages_"+reward.tag.replace(" ", ""))
							div(id="ap_"+reward.tag.replace(" ", ""))
							div(id="total_"+reward.tag.replace(" ", ""))
