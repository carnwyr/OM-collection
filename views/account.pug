extends layout

block content
	script(src="/javascripts/accountFunctions.js")
	script.
    var username = !{JSON.stringify(user.name)};

	div(id="successAlert" class="alert alert-success" role="alert" style="position: fixed; z-index: 2; right: 20px; display: none; top: -100px") Confirmation message has been sent to your email
	div(id="failAlert" class="alert alert-danger" role="alert" style="position: fixed; z-index: 2; right: 20px; display: none; top: -100px") Something went wrong, please reload the page
	
	div(class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="bindEmailLabel" aria-hidden="true")
		div(class="modal-dialog" role="document")
			div(class="modal-content")
				div(class="modal-header")
					h5(class="modal-title" id="bindEmailLabel") Bind email
					button(type="button" class="close" data-dismiss="modal" aria-label="Close")
						span( aria-hidden="true") &times;
				div(class="modal-body")
					p A confirmation message will be sent to your email. Please open the link in it to verify the email address. 
					form
						div(class='form-group')
							label(for="email") Email
							input(class='form-control' type="text" id="email" name="email")
						div(class='form-group')
							label(for="password") Karasu OS password
							input(class='form-control' type="text" id="password" name="password")
				div(class="modal-footer")
					button(type="button" class="btn btn-secondary text-light" id="sendVerification") Send verification message

	div(class="container")
		div(class="row text-left mb-3")
			div(class="col-12")
				h2(class="text-primary pb-2" style='border-bottom: 2px solid; border-color: #8d6fe2;') #{user.name}
		div(class="row")
			div(class="col-12 card p-2 rounded shadow")
				if user.email
					p user.email
					- var buttonText = "Change email"
				else
					p No email is bound
					- var buttonText = "Bind email"
				button(class="btn btn-primary col-2" id="setEmail" data-toggle="modal" data-target="#emailModal")= buttonText